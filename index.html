<!doctype html>
<html lang="ru">

<head>
    <title>Drum kit</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="description" content="Базовый HTML5 шаблон">
    <meta name="author" content="Cerebrume">
    <meta name="viewport" content="width=device-width, initial-scale=1.0", maximum-scale=1.0>
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet">
    <!--[if lt IE 9]> <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
</head>

<body>
    <div class="keys">
    	<dev data-key= "65" class="key">
    	<kbd>
    		A
    	</kbd>
    	<span class="sound">
    		boom
    	</span>
    	</dev>
    	<dev data-key= "83" class="key">
    	<kbd>
    		S
    	</kbd>
    	<span class="sound">
            clap
    	</span>
    	</dev>
    	<dev data-key= "68" class="key">
    	<kbd>
    		D
    	</kbd>
    	<span class="sound">
            hihat
    	</span>
    	</dev>
    	<dev data-key= "70" class="key">
    	<kbd>
    		F
    	</kbd>
    	<span class="sound">
            kick
    	</span>
    	</dev>
    	<dev data-key= "71" class="key">
    	<kbd>
    		G
    	</kbd>
    	<span class="sound">
            openh
       	</span>
    	</dev>
    	<dev data-key= "72" class="key">
    	<kbd>
    		H
    	</kbd>
    	<span class="sound">
            ride
    	</span>
    	</dev>
    	<dev data-key= "74" class="key">
    	<kbd>
    		J
    	</kbd>
    	<span class="sound">
            snare
    	</span>
    	</dev>
    	<dev data-key= "75" class="key">
    	<kbd>
    		K
    	</kbd>
    	<span class="sound">
            tink
    	</span>
    	</dev>
    	<dev data-key= "76" class="key">
    	<kbd>
    		L
    	</kbd>
    	<span class="sound">
            tom
    	</span>
    	</dev>
    </div>

    <audio data-key="65" src="sounds/boom.wav"></audio>
    <audio data-key="83" src="sounds/clap.wav"></audio>
    <audio data-key="68" src="sounds/hihat.wav"></audio>
    <audio data-key="70" src="sounds/kick.wav"></audio>
    <audio data-key="71" src="sounds/openhat.wav"></audio>
    <audio data-key="72" src="sounds/ride.wav"></audio>
    <audio data-key="74" src="sounds/snare.wav"></audio>
    <audio data-key="75" src="sounds/tink.wav"></audio>
    <audio data-key="76" src="sounds/tom.wav"></audio>

    <script>
    	window.addEventListener('keydown', function(e) {
		const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        if (!audio)
            return ;
        audio.currentTime = 0; // revind to the start
        audio.play();
        key.classList.add('playing');
        
        function removeTransition(e) {
            if (e.propertyName !== 'transform') return ;
            this.classList.remove('playing');
            console.log(e.propertyName);
        }

    	const keys = document.querySelectorAll('.key');
        keys.forEach(key => key.addEventListener('transitionend', removeTransition));
    	});
    </script>
</body>

</html>
